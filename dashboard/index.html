<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Glowi.es</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="icon" href="/static/cdn/favicon.ico">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo" id="logoContainer">
                    <img id="logoImage" src="/static/cdn/125457885.jpeg" alt="glowi" style="width: 24px; height: 24px; border-radius: 4px; object-fit: cover;">
                    <span style="color: #64748b; font-size: 18px; font-weight: 700;">glowi<span style="color: #a855f7;">.es</span></span>
                </div>
                <button id="sidebarToggle" class="sidebar-toggle" style="background: none; border: 1px dashed rgba(168, 85, 247, 0.4); color: #a855f7; cursor: pointer; font-size: 18px; padding: 6px 10px; transition: all 0.2s; border-radius: 6px; display: flex; align-items: center; justify-content: center; width: 32px; height: 32px;">&lt;</button>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-label-container">
                        <span class="nav-label" data-section="navigation">NAVIGATION</span>
                        <span class="nav-dot" data-section="navigation"></span>
                    </div>
                    <a href="#overview" class="nav-item active" data-page="overview">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                        </svg>
                        <span>Dashboard</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-label-container">
                        <span class="nav-label" data-section="account">ACCOUNT</span>
                        <span class="nav-dot" data-section="account"></span>
                    </div>
                    <a href="#profile" class="nav-item" data-page="profile">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="8" r="4"></circle>
                            <path d="M4 21v-1a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v1"></path>
                        </svg>
                        <span>Profile</span>
                    </a>
                    <a href="#connections" class="nav-item" data-page="connections">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 5v14"></path>
                            <path d="M5 12h14"></path>
                            <circle cx="12" cy="5" r="2"></circle>
                            <circle cx="12" cy="19" r="2"></circle>
                            <circle cx="5" cy="12" r="2"></circle>
                            <circle cx="19" cy="12" r="2"></circle>
                        </svg>
                        <span>Connections</span>
                    </a>
                    <a href="#security" class="nav-item" data-page="security">
                        <svg width="18" height="18" viewBox="0 0 24 24">
                            <path d="M12 2L4 7V12C4 18 12 22 12 22S20 18 20 12V7L12 2Z" fill="#a855f7"/>
                            <line x1="12" y1="7" x2="12" y2="20" stroke="#0f0f11" stroke-width="1.2" stroke-linecap="round"/>
                            <line x1="6" y1="13" x2="18" y2="13" stroke="#0f0f11" stroke-width="1.2" stroke-linecap="round"/>
                        </svg>
                        <span>Security</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-label-container">
                        <span class="nav-label" data-section="assets">ASSETS</span>
                        <span class="nav-dot" data-section="assets"></span>
                    </div>
                    <a href="#biolinks" class="nav-item" data-page="biolinks">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 7h3a5 5 0 0 1 0 10h-3"></path>
                            <path d="M9 17H6a5 5 0 0 1 0-10h3"></path>
                            <path d="M8 12h8"></path>
                        </svg>
                        <span>Biolinks</span>
                    </a>
                    <a href="#files" class="nav-item" data-page="files">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <path d="M21 15l-5-5L5 21"></path>
                        </svg>
                        <span>Images</span>
                    </a>
                    <a href="#litterbox" class="nav-item" data-page="litterbox">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <span>LitterBox</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-label-container">
                        <span class="nav-label" data-section="staff">STAFF PANELS</span>
                        <span class="nav-dot" data-section="staff"></span>
                    </div>
                    <a href="#admin" class="nav-item" data-page="admin">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="8" r="4"></circle>
                            <path d="M4 21v-1a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v1"></path>
                            <path d="M16 11h6"></path>
                            <path d="M19 8v6"></path>
                        </svg>
                        <span>Admin Panel</span>
                    </a>
                    <a href="#mod" class="nav-item" data-page="mod">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"></path>
                            <line x1="12" y1="12" x2="12" y2="18"></line>
                            <line x1="9" y1="15" x2="15" y2="15"></line>
                        </svg>
                        <span>Mod Panel</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <a href="#settings" class="nav-item" data-page="settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <span>Settings</span>
                </a>
                <a href="#privacy" class="nav-item" data-page="privacy">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    <span>Privacy</span>
                </a>
                <a href="#tos" class="nav-item" data-page="tos">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 6a2 2 0 012-2h12a2 2 0 012 2v2H4V6z"></path>
                        <path d="M4 8h16v10a2 2 0 01-2 2H6a2 2 0 01-2-2V8z"></path>
                        <path d="M8 12h.01"></path>
                        <path d="M12 12h.01"></path>
                        <path d="M16 12h.01"></path>
                    </svg>
                    <span>Terms of Service</span>
                </a>
                <a href="#api" class="nav-item api-nav-item" data-page="api" style="opacity: 0.6; pointer-events: none; border: 1px dashed rgba(168, 85, 247, 0.4);">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                    <span>API <span style="font-size: 10px; background: #a855f7; padding: 2px 6px; border-radius: 3px; margin-left: 4px;">SOON</span></span>
                </a>
                <div class="user-profile">
                    <img src="/static/cdn/avatar.png" alt="User" class="user-avatar" id="userAvatar">
                    <div class="user-info">
                        <span class="user-name" id="userName">Loading...</span>
                        <span class="user-handle" id="userHandle">@...</span>
                    </div>
                    <button class="sign-out-btn" onclick="fetch('/api/auth/logout', {method:'POST', credentials:'include'}).then(() => window.location.replace('/login'));" title="Sign Out">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Sign Out
                    </button>
                </div>
            </div>
        </aside>
        
        <main class="main-content">
            <header class="main-header">
                <div class="search-container" style="position: relative;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35"></path>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search here" class="search-input">
                    <span class="search-shortcut"><span class="shortcut-key">Ctrl</span><span class="shortcut-key">K</span></span>
                    <div id="searchResults" style="position: absolute; top: 100%; left: 0; right: 0; background: linear-gradient(180deg, rgba(15,15,20,0.95), rgba(15,15,20,0.85)); border: 1px solid rgba(168,85,247,0.2); border-radius: 12px; margin-top: 8px; max-height: 400px; overflow-y: auto; display: none; z-index: 1000; box-shadow: 0 12px 40px rgba(0,0,0,0.8);"></div>
                </div>
                <div class="header-actions">
                    <button class="header-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                            <path d="M22 7l-10 7L2 7"></path>
                        </svg>
                    </button>
                    <button class="header-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </button>
                    <div class="header-user" style="display: flex; align-items: center; gap: 12px; position: relative; border: 1px dashed rgba(168, 85, 247, 0.3); padding: 8px 12px; border-radius: 8px;">
                        <div style="text-align: right;">
                            <div class="header-username" id="headerUserName" style="font-size: 13px; color: var(--accent-secondary);">Loading...</div>
                            <div id="roleDisplay" style="font-size: 11px; color: var(--text-muted); font-family: monospace;">root@user.glowi.es</div>
                        </div>
                        <img src="/static/cdn/avatar.png" alt="User" class="header-avatar" id="headerAvatar">
                        <button id="headerDropdownBtn" style="background: none; border: 1px dashed rgba(168, 85, 247, 0.4); color: #a855f7; cursor: pointer; font-size: 14px; padding: 6px 10px; transition: all 0.2s; border-radius: 6px;">ÀÖ</button>
                        <div id="headerDropdownMenu" style="position: absolute; bottom: -168px; right: 0; width: 160px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 10px; padding: 6px 0; display: none; z-index: 1000; box-shadow: 0 8px 24px rgba(0,0,0,0.6); backdrop-filter: blur(8px);">
                            <a href="#" onclick="dashboard.loadPage('profile'); document.getElementById('headerDropdownMenu').style.display='none'; document.getElementById('headerDropdownBtn').textContent='ÀÖ';" style="display: block; width: 100%; padding: 12px 14px; color: #a855f7; text-decoration: none; font-size: 13px; font-weight: 500; transition: all 0.3s ease; background: transparent; cursor: pointer; margin: 2px 4px; border-radius: 6px; box-sizing: border-box;" onmouseover="this.style.backgroundColor='rgba(168, 85, 247, 0.08)';" onmouseout="this.style.backgroundColor='transparent';">Profile</a>
                            <a href="#" onclick="dashboard.loadPage('settings'); document.getElementById('headerDropdownMenu').style.display='none'; document.getElementById('headerDropdownBtn').textContent='ÀÖ';" style="display: block; width: 100%; padding: 12px 14px; color: #a855f7; text-decoration: none; font-size: 13px; font-weight: 500; transition: all 0.3s ease; background: transparent; cursor: pointer; margin: 2px 4px; border-radius: 6px; box-sizing: border-box;" onmouseover="this.style.backgroundColor='rgba(168, 85, 247, 0.08)';" onmouseout="this.style.backgroundColor='transparent';">Settings</a>
                            <a href="#" onclick="fetch('/api/auth/logout', {method:'POST', credentials:'include'}).then(() => window.location.replace('/login'));" style="display: block; width: 100%; padding: 12px 14px; color: #a855f7; text-decoration: none; font-size: 13px; font-weight: 500; transition: all 0.3s ease; background: transparent; cursor: pointer; margin: 2px 4px; border-radius: 6px; box-sizing: border-box;" onmouseover="this.style.backgroundColor='rgba(168, 85, 247, 0.08)';" onmouseout="this.style.backgroundColor='transparent';">Logout</a>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="content-area" id="contentArea">
            </div>
        </main>
    </div>
    
    <script src="/static/js/dashboard.js"></script>
    <script>
        (async function() {
            try {
                console.log('üöÄ Starting dashboard initialization...');
                window.dashboard = new Dashboard();
                await window.dashboard.init();
                console.log('‚úÖ Dashboard initialization complete');
            } catch (error) {
                console.error('‚ùå Dashboard initialization failed:', error);
                const contentArea = document.getElementById('contentArea');
                if (contentArea) {
                    contentArea.innerHTML = `
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 300px; text-align: center;">
                            <h2 style="color: #a855f7; margin-bottom: 16px;">Something went wrong</h2>
                            <p style="color: #666; margin-bottom: 24px;">Failed to load dashboard. Please try refreshing the page.</p>
                            <button onclick="window.location.reload()" style="background: #a855f7; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Refresh Page</button>
                        </div>
                    `;
                }
            }
        })();
    </script>
</body>
</html>
